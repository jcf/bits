#+title:    App
#+startup:  content
#+property: header-args :dir ..

All code covered by the [[file:~/code/bits/LICENSE][AGPL]].

* Crates
#+begin_src sh :results output verbatim :dir ../crates
ls -1
#+end_src

#+results:
: bits
: bits-axum-session-sqlx
: bits-db
: bits-domain
: bits-e2e
: bits-tailwind-merge

** =bits=
The heart of the Bits application where views, models, and connective tissue
reside.

#+begin_src sh :results output verbatim :dir ../crates/bits
fd --type f '\.rs$'
#+end_src

#+results:
#+begin_example
src/app.rs
src/auth/core.rs
src/auth/mod.rs
src/auth/password.rs
src/auth/registration.rs
src/auth/session.rs
src/auth/verification.rs
src/auth_rate_limit/config.rs
src/auth_rate_limit/error.rs
src/auth_rate_limit/mod.rs
src/auth_rate_limit/service.rs
src/auth_rate_limit/storage.rs
src/components/alert.rs
src/components/auth_form_fields.rs
src/components/avatar.rs
src/components/button.rs
src/components/category_item.rs
src/components/feature_card.rs
src/components/footer.rs
src/components/header.rs
src/components/icons.rs
src/components/input.rs
src/components/mod.rs
src/components/navigation_popover.rs
src/components/sign_out_button.rs
src/components/sign_out_link.rs
src/config.rs
src/csrf.rs
src/demos/charlie.rs
src/demos/emporium.rs
src/demos/jcf.rs
src/demos/mod.rs
src/demos/template.rs
src/hooks.rs
src/http.rs
src/i18n.rs
src/lib.rs
src/main.rs
src/metrics.rs
src/middleware/auth_rate_limit.rs
src/middleware/csrf.rs
src/middleware/metrics.rs
src/middleware/mod.rs
src/middleware/realm.rs
src/pages/auth.rs
src/pages/home.rs
src/pages/join.rs
src/pages/landing.rs
src/pages/layout.rs
src/pages/mod.rs
src/pages/not_found.rs
src/pages/verify_email.rs
src/password.rs
src/server.rs
src/subdomain.rs
src/tenant.rs
src/verification.rs
#+end_example

#+begin_src sh :results output verbatim :dir ../crates/bits-app
tokei
#+end_src

#+results:
#+begin_example
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Language              Files        Lines         Code     Comments       Blanks
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 FreeMarker                1          107           92            0           15
 TOML                      1           77           72            0            5
─────────────────────────────────────────────────────────────────────────────────
 Rust                     57         6427         5497          184          746
 |- Markdown              26          256            4          213           39
 (Total)                             6683         5501          397          785
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Total                    59         6867         5665          397          805
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#+end_example

** =bits-axum-session-sqlx=
A customized =sqlx= integration for =axum-session= that is a little more
relational (i.e. sessions have a =user_id= column that's a foreign key to the
=users(id)=).

#+begin_src sh :results output verbatim :dir ../crates/bits-axum-session-sqlx
fd --type f '\.rs$'
#+end_src

#+results:
: src/lib.rs

#+begin_src sh :results output verbatim :dir ../crates/bits-axum-session-sqlx
tokei
#+end_src

#+results:
: ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
:  Language              Files        Lines         Code     Comments       Blanks
: ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
:  Rust                      1          225          198            0           27
:  TOML                      1           12           11            0            1
: ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
:  Total                     2          237          209            0           28
: ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

** =bits-db=
PostgreSQL-specific logic and features. Things like timestamp support that
includes recognition of ='infinity'=.

#+begin_src sh :results output verbatim :dir ../crates/bits-db
fd --type f '\.rs$'
#+end_src

#+results:
: src/lib.rs
: src/timestamp.rs
: src/url.rs

#+begin_src sh :results output verbatim :dir ../crates/bits-db
tokei
#+end_src

#+results:
#+begin_example
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Language              Files        Lines         Code     Comments       Blanks
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 TOML                      1           12           11            0            1
─────────────────────────────────────────────────────────────────────────────────
 Rust                      3          177          146            4           27
 |- Markdown               1            8            0            7            1
 (Total)                              185          146           11           28
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Total                     4          197          157           11           29
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#+end_example

** =bits-domain=
Shared types and common logic. Empty as of right now.

#+begin_src sh :results output verbatim :dir ../crates/bits-domain
fd --type f '\.rs$'
#+end_src

#+results:
: src/email.rs
: src/id.rs
: src/ip_address.rs
: src/lib.rs
: src/name.rs
: src/password.rs
: src/password_hash.rs
: src/pii.rs

#+begin_src sh :results output verbatim :dir ../crates/bits-domain
tokei
#+end_src

#+results:
#+begin_example
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Language              Files        Lines         Code     Comments       Blanks
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 TOML                      1           22           18            0            4
─────────────────────────────────────────────────────────────────────────────────
 Rust                      8          966          791           15          160
 |- Markdown               7          147            0          108           39
 (Total)                             1113          791          123          199
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Total                     9         1135          809          123          203
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#+end_example

** =bits-e2e=
End-to-end tests and test utilities for black-box testing Bits.

#+begin_src sh :results output verbatim :dir ../crates/bits-e2e
fd --type f '\.rs$'
#+end_src

#+results:
#+begin_example
src/assertions.rs
src/bin/seed.rs
src/client.rs
src/fixtures.rs
src/lib.rs
src/request.rs
src/seeds.rs
src/server.rs
tests/auth.rs
tests/email_verification_enforcement.rs
tests/metrics.rs
tests/rate_limit.rs
tests/realm.rs
tests/realm_solo.rs
tests/security.rs
#+end_example

#+begin_src sh :results output verbatim :dir ../crates/bits-e2e
tokei
#+end_src

#+results:
#+begin_example
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Language              Files        Lines         Code     Comments       Blanks
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 TOML                      1           42           38            0            4
─────────────────────────────────────────────────────────────────────────────────
 Rust                     15         2633         2086          114          433
 |- Markdown               3            6            0            6            0
 (Total)                             2639         2086          120          433
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Total                    16         2681         2124          120          437
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#+end_example

** =bits-tailwind-merge=
Rust port of functionality provided by libraries like tailwind-merge in the
JavaScript ecosystem. Wholly generated and only lightly reviewed so no plans to
release.

#+begin_src sh :results output verbatim :dir ../crates/bits-tailwind-merge
fd --type f '\.rs$'
#+end_src

#+results:
#+begin_example
benches/merge_benchmarks.rs
src/config.rs
src/lib.rs
src/merge.rs
src/parser.rs
src/trie.rs
src/validator.rs
tests/arbitrary.rs
tests/conflicts.rs
tests/integration.rs
tests/proptest.rs
tests/tailwind_versions.rs
#+end_example

#+begin_src sh :results output verbatim :dir ../crates/bits-tailwind-merge
tokei
#+end_src

#+results:
#+begin_example
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Language              Files        Lines         Code     Comments       Blanks
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Org                       1            6            4            0            2
 TOML                      1           16           13            0            3
─────────────────────────────────────────────────────────────────────────────────
 Rust                     12         6233         5074          587          572
 |- Markdown               9          118            0          107           11
 (Total)                             6351         5074          694          583
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
 Total                    14         6373         5091          694          588
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#+end_example
