# Build MVP TypeScript

Build a working MVP that allows creators to upload encrypted content and users to pay for access. Think "Web3 OnlyFans" - democratized and encrypted.

## Business Priorities

1. Get to first paying user ASAP
2. Build only what's needed for revenue
3. Use existing solutions wherever possible
4. Optimize for feature velocity over code beauty

## Tech Stack

- Language: TypeScript everywhere
- Backend: Node.js with Express/Fastify
- Database: PostgreSQL for MVP (decentralize later)
- Payments: Stripe for fiat, web3 wallet for crypto
- Storage: S3-compatible for MVP (IPFS later)
- Auth: Magic links or wallet signatures
- Frontend: React with Vite
- Styling: Tailwind CSS
- Deployment: Vercel/Railway for speed

## MVP Features (Week 1)

### Core User Flow
1. Creator signs up (email or wallet)
2. Creator uploads content (images/videos/files)
3. Content is encrypted client-side
4. Creator sets price in USD or USDC
5. Buyer discovers content (preview/description)
6. Buyer pays and receives decryption key
7. Content is decrypted client-side

### Project Structure
```
bits/
├── packages/
│   ├── shared/         # Shared types and crypto functions
│   │   ├── src/
│   │   │   ├── crypto.ts      # Encryption/decryption
│   │   │   ├── types.ts       # Shared TypeScript types
│   │   │   └── index.ts
│   │   └── package.json
│   ├── api/           # Backend API
│   │   ├── src/
│   │   │   ├── index.ts       # Express server
│   │   │   ├── auth.ts        # Authentication
│   │   │   ├── payments.ts    # Stripe/crypto payments
│   │   │   ├── content.ts     # Content management
│   │   │   └── db.ts          # Database queries
│   │   ├── package.json
│   │   └── tsconfig.json
│   └── web/           # Frontend
│       ├── src/
│       │   ├── App.tsx
│       │   ├── pages/
│       │   │   ├── Upload.tsx
│       │   │   ├── Browse.tsx
│       │   │   └── Content.tsx
│       │   └── components/
│       ├── package.json
│       └── index.html
├── package.json       # Monorepo root
├── pnpm-workspace.yaml
└── .env.example
```

### Database Schema
```sql
-- Keep it simple for MVP
CREATE TABLE users (
  id UUID PRIMARY KEY,
  email TEXT UNIQUE,
  wallet_address TEXT UNIQUE,
  created_at TIMESTAMP
);

CREATE TABLE content (
  id UUID PRIMARY KEY,
  creator_id UUID REFERENCES users(id),
  title TEXT,
  description TEXT,
  preview_url TEXT,
  encrypted_url TEXT,
  price_cents INTEGER,
  price_usdc INTEGER,
  created_at TIMESTAMP
);

CREATE TABLE purchases (
  id UUID PRIMARY KEY,
  buyer_id UUID REFERENCES users(id),
  content_id UUID REFERENCES content(id),
  price_paid_cents INTEGER,
  payment_method TEXT, -- 'stripe' or 'crypto'
  transaction_id TEXT,
  created_at TIMESTAMP
);
```

### First Implementation Tasks

1. Set up monorepo with pnpm workspaces
2. Create shared package with encryption functions using webcrypto
3. Build API with these endpoints:
   - POST /auth/login (magic link)
   - POST /content/upload (get S3 presigned URL)
   - POST /content/create (save metadata)
   - GET /content (browse all content)
   - POST /purchase (Stripe payment + record purchase)
   - GET /content/:id/key (get decryption key if purchased)
4. Build minimal React frontend:
   - Login page
   - Upload page (encrypt client-side, upload to S3)
   - Browse page (grid of content with previews)
   - Content page (pay to unlock)

## Week 2 Priorities

- Add creator dashboard (earnings, analytics)
- Add USDC payments via wagmi/viem
- Add content categories/search
- Add creator profiles
- Deploy to production

## Key Technical Decisions

### Encryption
Use Web Crypto API with AES-GCM:
- Generate unique key per content
- Encrypt on client before upload
- Store encrypted blob in S3
- Deliver key only after payment

### Payments
Start with Stripe for fastest implementation:
- Use Stripe Checkout for conversion
- Add crypto payments in week 2
- Take 10% platform fee

### Storage
Use S3 or Cloudflare R2:
- Presigned URLs for upload
- CDN for delivery
- Move to IPFS after MVP proven

## Success Metrics

- First paying user within 48 hours
- 10 creators uploaded content by end of week 1
- $1000 in transactions by end of week 2
- Then optimize for retention and growth

## Remember

- Ship fast, iterate based on user feedback
- Every feature must drive revenue
- Use Claude Code for everything
- Don't over-engineer - we can decentralize later
